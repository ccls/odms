<% stylesheets(:phone_number_edit) %>
<% javascripts('edit_phone_number') %>

<div class='control'><div class='control_row'>
<h3><%= ( @phone_number.new_record? ) ? 'New' : 'Edit' %> Phone Number</h3>
<div><%= link_to( 'Cancel', study_subject_contacts_path( @study_subject),
	:class => 'button' ) %>&nbsp;<%= f.submit 'Save' %></div>
</div></div>

<%= f.error_messages %>

<%= f.wrapped_check_box :is_primary,
	:label_text => 'Primary Phone Number?' %>

<%= f.wrapped_text_field :phone_number,
	:label_text => 'Phone Number:' %>

<hr/>

<%#= f.wrapped_collection_select :phone_type_id, PhoneType.all, 
			:id, :key, :include_blank => true, :label_text => 'Type:' %>
<%= f.wrapped_select :phone_type, @phone_number.phone_types,
			:include_blank => true, :label_text => 'Type:' %>
<%#

	This selector will uniquely include the existing data source
	even if it is NOT included in the normal/new list

-%>
<div class='source'>
<%= f.wrapped_collection_select :data_source_id, 
	([ f.object.try(:data_source) ] + DataSource.where(:key => %w(raf consent interview other))).compact.uniq,
		:id, :to_s, :include_blank => true, :label_text => 'Source:' %>
<%= f.wrapped_text_field :other_data_source, 
	:label_text => 'Specify if other:' %>
</div><!-- class='source' -->

<%= f.wrapped_yndk_select :current_phone,
	:label_text => 'Current Number?' %>
