<% stylesheets('study_subject') %>
<% javascripts('edit_study_subject') %>
<% id_bar_for(@study_subject) %>

<%= f.error_messages %>

<div class='do_not_contact field_wrapper'>
<%= f.label :do_not_contact, "Contact Status:" %>
<%= f.check_box :do_not_contact %>
<%= f.label :do_not_contact, "do not contact subject?" %>
</div><!-- class='do_not_contact' -->

<%= wrapped_spans :study_subject, :childid,
	:label_text => 'Child ID:' %>

<h3>Basic Info</h3>
<% @study_subject.build_pii if @study_subject.pii.nil? %>
<% @study_subject.build_identifier if @study_subject.identifier.nil? %>

<% f.fields_for :pii do |pii_fields| %>
	<div class='name field_wrapper'>
	<%= pii_fields.label :name, 'name:' %>
	<%= pii_fields.wrapped_text_field :first_name,
		:label_text => 'first' %>
	<%= pii_fields.wrapped_text_field :middle_name,
		:label_text => 'middle' %>
	<%= pii_fields.wrapped_text_field :last_name,
		:label_text => 'last' %>
	</div><!-- class='name field_wrapper' -->

  <%= wrapped_spans :study_subject, :case_control_type,
			:label_text => 'case/control status:' %>

  <%= wrapped_spans :study_subject, :subject_type,
		:label_text => 'relation to case:' %>

	<%= pii_fields.wrapped_date_text_field :dob,
		:class => 'datepicker',
		:label_text => 'date of birth:' %>
<% end %>

<%= f.wrapped_sex_select :sex,
	:label_text => 'sex:' %>

<div class='race_wrapper'>
<span class='label'>Race:</span><%= select_subject_races(@study_subject) %>
</div>

<% f.fields_for :identifier do |identifier_fields| %>
	<%= identifier_fields.wrapped_text_field :state_registrar_no,
		:label_text => 'state registrar no:' %>
	<%= identifier_fields.wrapped_text_field :local_registrar_no,
		:label_text => 'local registrar no:' %>
<% end %>

<%= wrapped_date_spans :study_subject, :reference_date,
	:label_text => 'admit (reference) date:' %>

<%= f.wrapped_collection_select :vital_status_id,
	VitalStatus.all, :id, :to_s, :include_blank => true,
	:label_text => 'vital status:' %>

<h3>Parent Info</h3>
<% f.fields_for :pii do |pii_fields| %>
	<div class='name field_wrapper'>
	<%= pii_fields.label :fathers_name, 'father' %>
	<%= pii_fields.wrapped_text_field :father_first_name,
		:label_text => 'first' %>
	<%= pii_fields.wrapped_text_field :father_middle_name,
		:label_text => 'middle' %>
	<%= pii_fields.wrapped_text_field :father_last_name,
		:label_text => 'last' %>
	</div><!-- class='name field_wrapper' -->

	<div class='name field_wrapper'>
	<%= pii_fields.label :mothers_name, 'mother' %>
	<%= pii_fields.wrapped_text_field :mother_first_name,
		:label_text => 'first' %>
	<%= pii_fields.wrapped_text_field :mother_middle_name,
		:label_text => 'middle' %>
	<%= pii_fields.wrapped_text_field :mother_last_name,
		:label_text => 'last' %>
	</div><!-- class='name field_wrapper' -->

	<div class='maiden name field_wrapper'>
	<%= pii_fields.label :mothers_maiden_name, 'maiden' %>
	<%= pii_fields.text_field :mother_maiden_name %>
	</div><!-- class='name field_wrapper' -->
<% end %>
