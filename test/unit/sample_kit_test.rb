require 'test_helper'

class SampleKitTest < ActiveSupport::TestCase

	assert_should_create_default_object
	assert_should_initially_belong_to( :sample )
	assert_should_require_unique_attribute( :sample_id )

	test "sample_kit factory should create sample kit" do
		assert_difference('SampleKit.count',1) {
			sample_kit = Factory(:sample_kit)
		}
	end

	test "sample_kit factory should create sample" do
		assert_difference('Sample.count',1) {
			sample_kit = Factory(:sample_kit)
			assert_not_nil sample_kit.sample
		}
	end

	test "should require a unique sample" do
		assert_difference( "SampleKit.count", 1 ) {
		assert_difference('Sample.count', 1) {
			sample_kit = create_sample_kit
			assert_not_nil sample_kit.sample
			sample_kit = create_sample_kit(:sample_id => sample_kit.sample_id)
			assert sample_kit.errors.include?(:sample_id)
		} }
	end

protected

	#	create_object is called from within the common class tests
	alias_method :create_object, :create_sample_kit

end
