#
#	crontab some_crontab_text_file.txt
#		will overwrite the entire existing crontab setup.
#
#	crontab -e 
#		will open up an editor
#
#	crontab -l
#		will display the crontab file
#
#	* * * * * Command to be executed
#	- - - - -
#	| | | | |
#	| | | | +----- Day of week (0-6)
#	| | | +------- Month (1 - 12)
#	| | +--------- Day of month (1 - 31)
#	| +----------- Hour (0 - 23)
#	+------------- Min (0 - 59)
#
#
# @monthly        Run once a month, "0 0 1 * *".
# @weekly         Run once a week, "0 0 * * 0".
# @daily          Run once a day, "0 0 * * *".
#
#
#
#
#
#	Which shell?	Setting must include path apparently
SHELL=/bin/tcsh
#
#	To what is RAILS_ENV set?	seems unset (is set in .tcshrc so if tcsh is shell is set)
#	Could also explicitly set it
RAILS_ENV=production
#
#
#	Without setting mail will be stored locally on this computer.
#	I think setting MAILTO='' will stop it from being sent.
#	Could also set the ~/.forward file to this as well.
#MAILTO='jakewendt@berkeley.edu'
#	As of 20140120-ish, the cron daemon would send error emails
#	The setting of MAILTO='jwendt@genepi.berkeley.edu' has stopped them.
MAILTO='jwendt@genepi.berkeley.edu'
#	apparently genepi1 isn't set to send external email
#
#   ----- The following addresses had permanent fatal errors -----
#<jakewendt@berkeley.edu>
#    (reason: 550-Verification failed for <jwendt@localhost.localdomain>)
#
#
#	Can I have a series of commands in crontab, or should I put it all in one script.
#	Yes.  Either way.  Seems that everything after the time designation is executed
#


#
#	Dump significant tables to xml.
#
#	According to Yang, this is not being and has never been used.
#@daily cd /my/ruby/odms/ ; bundle exec rake app:data:export_to_xml >> /my/ruby/logs/export_to_xml.log



#
#	Try to import the latest icf_master_tracker file
#
#	every WEEKday at 8PM
#	Changed mounting using fstab (more unixy).  Should never lose mount now.
#	Also, fyi "abort" calls from rake task will send email.
0 20 * * 1,2,3,4,5 cd /my/ruby/odms/ ; bundle exec rake automate:updates_from_icf_master_tracker >> /my/ruby/logs/automate_updates_from_icf_master_tracker.log



#
#	import bc_info screening data (from ICF)
#	Every OTHER Wednesday at 7PM
#
#	can't really do the "OTHER" with just cron
#
0 19 * * 3 cd /my/ruby/odms/ ; bundle exec rake automate:import_screening_data >> /my/ruby/logs/automate_import_screening_data.log





#
#	import birth_data (from USC)
#	Every Thursday at 7PM ( NOT YET THOUGH )
#	Probably will never happen.  We don't receive them regularly.
#
#0 19 * * 4 cd /my/ruby/odms/ ; bundle exec rake app:birth_data:import_birth_data >> /my/ruby/logs/automate_import_birth_data.log






#	
#	Add daily mysql_dump
#	Add weekly mysql_dump
#	Add monthly mysql_dump
#
# @monthly        Run once a month, "0 0 1 * *".
# @weekly         Run once a week, "0 0 * * 0".
# @daily          Run once a day, "0 0 * * *".


#	every 30 minutes
15,45 * * * * cd /my/ruby/odms/ ; bundle exec rake app:study_subjects:sync_related_icf_master_ids >> /my/ruby/logs/study_subjects_sync_related_icf_master_ids.log
20,50 * * * * cd /my/ruby/odms/ ; bundle exec rake app:addresses:geocode >> /my/ruby/logs/addresses_geocode.log
0,30 * * * * cd /my/ruby/odms/ ; bundle exec rake app:study_subjects:reindex >> /my/ruby/logs/study_subjects_reindex.log

